'use client'
import { forwardRef, useState, useEffect, createElement } from 'react'
import { BaseIcon } from '../BaseIcon.js'
import { loadIcon } from '../utils/loadIcon.js'

/**
 * DynamicIcon component dynamically loads and renders icons based on the provided metadata and type.
 *
 * @param {IDynamicIcon} props
 * @param {React.ForwardedRef<SVGSVGElement>} ref
 * @returns {ReactElement | null} Element for the DynamicIcon component or null if the icon fails to load.
 */
const DynamicIcon = forwardRef(
  ({ size, color, className, variant, fallback, metadata, type }, ref) => {
    const [Icon, setIcon] = useState(null)
    useEffect(() => {
      if (!metadata) {
        return
      }
      loadIcon(type, metadata)
        .then((loadedIcon) => {
          setIcon(loadedIcon)
        })
        .catch(() => {
          setIcon(null)
        })
    }, [type, metadata])
    // Show fallback for errors or missing icons
    if (!Icon && fallback) {
      return createElement(BaseIcon, {
        ref,
        size,
        color,
        className,
        fallback,
      })
    }
    return Icon
      ? createElement(Icon, {
          ref,
          size,
          color,
          className,
          variant,
        })
      : null
  },
)

export { DynamicIcon as default }
//# sourceMappingURL=DynamicIcon.js.map
